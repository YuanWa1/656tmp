<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>656tmp_p1</title>
  </head>
  <body>
    <div class="page">
      <main class="stage">
        <section class="stage__frame">
          <canvas id="glcanvas" width="640" height="640"></canvas>
        </section>

        <aside class="panel">
          <div class="panel__header">
            <h2>Controls</h2>
            <span class="panel__badge">Live</span>
          </div>

          <div class="control-group">
            <label class="control toggle">
              <input id="all-reflection-checkbox" type="checkbox" />
              <span class="toggle__track"></span>
              <span class="control__label">All Reflection</span>
            </label>
            <label class="control toggle">
              <input id="regular-checkbox" type="checkbox" checked />
              <span class="toggle__track"></span>
              <span class="control__label">Regular</span>
            </label>
          </div>

          <div class="control-group">
            <label class="control">
              <span class="control__label">n1: <input id="n1-input" type="number" min="0.1" max="30.0" step="0.1" value="1.0" style="width: 60px; margin-left: 8px; padding: 4px; border-radius: 4px; border: 1px solid rgba(15, 34, 51, 0.18);" /></span>
              <input id="n1-slider" type="range" min="1" max="300" value="10" step="1" />
            </label>
            <label class="control">
              <span class="control__label">n2: <input id="n2-input" type="number" min="0.1" max="30.0" step="0.1" value="1.2" style="width: 60px; margin-left: 8px; padding: 4px; border-radius: 4px; border: 1px solid rgba(15, 34, 51, 0.18);" /></span>
              <input id="n2-slider" type="range" min="1" max="300" value="12" step="1" />
            </label>
          </div>

          <div class="texture-previews">
            <div class="texture-preview">
              <h4>Base</h4>
              <img src="./pics/base_p2.png" alt="Base texture" />
            </div>
            <div class="texture-preview">
              <h4>Env</h4>
              <img src="./pics/env.png" alt="Environment texture" />
            </div>
          </div>

          <!-- <div class="panel__footer">
            <button class="button button--primary">Reset scene</button>
            <button class="button button--ghost">Snapshot</button>
          </div> -->
        </aside>

        <section class="stage__content">
          <div class="content__demo">
            <h3>Demo</h3>
            <video controls>
              <source src="./pics/Demo.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
          <div class="content__description">
            <h2>Description</h2>
            <p> This fragment shader implements per-pixel lighting using the Blinn-Phong model on a flat 2D surface in UV space. It samples an albedo texture for base color and a tangent-space normal map for per-pixel surface orientation. </p> 
            <p> The normal map is stored in RGB in [0,1] and is decoded to a signed normal in [-1,1] with N = normalize(nTex * 2.0 - 1.0). This decoded normal replaces geometric normals and creates a 3D appearance on a flat plane. </p> 
            <p> Lighting uses a movable light derived from the mouse: L is the direction from (uv,0) to (mouse_position,0.2), while the view direction V is fixed at (0,0,1). Diffuse is max(dot(N,L),0). Specular uses the Blinn-Phong half-vector H = normalize(L+V) with pow(max(dot(N,H),0), shininess). Ambient, diffuse, and specular are summed in linear space, then gamma-encoded for display. </p>
          </div>
        </section>
      </main>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
